{% extends "layout.html.twig" %}
{% block title %}Recherche{% endblock %}

{% block content %}
    
    {% for flashMessage in app.session.flashbag.get('success') %}
    {# affichage du message de réussite #}
        <div class="alert alert-success">
            {{ flashMessage }}
        </div>
    {% endfor %}     
    <section >
    {{ form_start(searchForm, { attr: {'id':'form'} ,'method':'GET'})}}    
        <div class="form-group">
            {{ form_widget(searchForm.text) }}     
        </div>
    {{ form_end(searchForm)}}
</section>
        <section class="resultat">
                {% for article in articles %}
                <article>
                    <h2>{{ article.title }}</h2>
                    <p><a href="{{ path('voirArticle', {id: article.id}) }}">Voir</a></p>
                </article>
                {% endfor %}
        </section>

        {% block javascipt %}
        {# <script>
        $(function(){    
            $('#search_Recherche').click(function(event){
                event.preventDefault();
                    $.ajax({
                    type: 'POST',
                    url: "{{ asset('resultat.html.twig') }}",
                    data: $('#form').serialize(),
                    timeout: 3000,
                    dataType: 'html',
                    success: function(data){
                        $('#resultat').html(data);
                    },
                    error: function() {
                      alert('La requête n\'a pas abouti'); 
                    }
                });
            });       
        });
    </script> #}
        {% endblock %}
{% endblock %}